<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Auto-Blogging Studio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='languages.js') }}"></script>
</head>
<body>
    <div class="app-container">
        <!-- Left Sidebar -->
        <aside class="sidebar-left">
            <div class="sidebar-header">
                <h1>AI Blogging Studio</h1>
                <div class="language-selector">
                    <select id="languageSelect" class="language-select">
                        <option value="ko">한국어</option>
                        <option value="vi">Tiếng Việt</option>
                        <option value="en">English</option>
                    </select>
                </div>
            </div>
            <div class="sidebar-section">
                <details id="historySection" class="collapsible-section" open>
                    <summary class="sidebar-section-header">
                        <h2 class="sidebar-section-title" data-i18n="postingHistory">포스팅 기록</h2>
                        <div class="header-actions">
                            <button id="clearHistoryBtn" class="button-icon" data-i18n="clearAllHistory" title="기록 전체 삭제">🗑️</button>
                            <span class="collapse-icon"></span>
                        </div>
                    </summary>
                    <div class="collapsible-content-wrapper">
                        <ul id="historyList" class="history-list">
                            <li class="history-placeholder" data-i18n="noRecords">기록이 없습니다.</li>
                        </ul>
                    </div>
                </details>

                <div class="settings-group">
                    <h3 data-i18n="contentGeneration">콘텐츠 생성 (Gemini)</h3>
                    <div class="form-group">
                        <label for="geminiModel" data-i18n="geminiModel">Gemini 모델</label>
                        <select id="geminiModel">
                            <optgroup data-i18n="geminiSeries25" label="Gemini 2.5 Series (멀티모달 텍스트 출력)">
                                <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
                                <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
                                <option value="gemini-2.5-flash-lite">Gemini 2.5 Flash-Lite</option>
                            </optgroup>
                            <optgroup data-i18n="geminiSeries20" label="Gemini 2.0 Series (멀티모달 텍스트 출력)">
                                <option value="gemini-2.0-flash">Gemini 2.0 Flash</option>
                                <option value="gemini-2.0-flash-lite">Gemini 2.0 Flash-Lite</option>
                            </optgroup>
                            <optgroup data-i18n="geminiSeries15" label="Gemini 1.5 Series (안정 버전)">
                                <option value="gemini-1.5-pro-latest" selected>Gemini 1.5 Pro (기본값)</option>
                                <option value="gemini-1.5-flash-latest">Gemini 1.5 Flash</option>
                            </optgroup>
                            <optgroup data-i18n="geminiSeries10" label="Gemini 1.0 Series">
                                <option value="gemini-pro">Gemini 1.0 Pro</option>
                            </optgroup>
                            <optgroup data-i18n="geminiSpecialPurpose" label="특수 목적 모델 (블로그 생성 불가)">
                                <option value="gemini-live-2.5-flash-preview">Live: 2.5 Flash (실시간 음성/영상)</option>
                                <option value="gemini-2.5-flash-preview-native-audio-dialog">Audio: 2.5 Flash Native (대화)</option>
                                <option value="gemini-2.5-flash-exp-native-audio-thinking-dialog">Audio: 2.5 Flash Native+Thinking (대화)</option>
                                <option value="gemini-2.5-flash-preview-tts">TTS: 2.5 Flash (텍스트→음성)</option>
                                <option value="gemini-2.5-pro-preview-tts">TTS: 2.5 Pro (텍스트→음성)</option>
                                <option value="gemini-2.0-flash-preview-image-generation">Image Gen: 2.0 Flash (이미지 생성)</option>
                                <option value="gemini-2.0-flash-live-001">Live: 2.0 Flash (실시간 음성/영상)</option>
                            </optgroup>
                            <optgroup data-i18n="geminiDeprecated" label="지원 중단된 모델">
                                <option value="gemini-1.5-pro-002">Gemini 1.5 Pro-002 (지원 중단됨)</option>
                                <option value="gemini-1.5-flash-002">Gemini 1.5 Flash-002 (지원 중단됨)</option>
                            </optgroup>
                        </select>
                        <p id="modelCompatibilityWarning" class="info-text hidden" style="color: var(--warning-color); margin-top: 8px;"></p>
                    </div>
                    <div class="form-group">
                        <label for="writingTone" data-i18n="writingTone">글쓰기 톤 & 스타일</label>
                        <select id="writingTone">
                            <option value="전문적인 (Professional)" data-i18n="professional">전문적인</option>
                            <option value="친근한 (Friendly)" selected data-i18n="friendly">친근한</option>
                            <option value="유머러스한 (Humorous)" data-i18n="humorous">유머러스한</option>
                            <option value="설득적인 (Persuasive)" data-i18n="persuasive">설득적인</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="targetAudience" data-i18n="targetAudience">타겟 독자</label>
                        <input type="text" id="targetAudience" data-i18n-placeholder="audiencePlaceholder" placeholder="예: IT 비전공자">
                    </div>
                </div>

                <div class="settings-group policy-warning-group">
                    <h3 data-i18n="responsibleUseGuide">⚠️ 책임감 있는 사용 가이드</h3>
                    <p class="form-group-description" data-i18n="responsibilityWarning">
                        본 프로그램은 콘텐츠 제작을 돕는 <strong>'도구'</strong>이며, 생성된 콘텐츠의 저작권 및 각종 정책 준수에 대한 <strong>최종 책임은 사용자에게 있습니다.</strong>
                    </p>
                    <p class="form-group-description" data-i18n="policyWarning">
                        AI 생성 및 YouTube 변환 콘텐츠를 그대로 사용할 경우, Google 검색 스팸 정책, 애드센스 정책, 저작권법 등에 위배되어 불이익을 받을 수 있습니다.
                    </p>
                    <p class="form-group-description" data-i18n="recommendedUsage">
                        <strong>권장 사용법:</strong> 생성된 콘텐츠는 <strong>'초안'</strong>으로만 활용하세요. 자신의 지식, 경험, 의견을 충분히 추가하여 독창적인 게시물로 재창조하는 것이 중요합니다.
                    </p>
                </div>
            </div>
            <footer class="sidebar-footer">
                <button id="loginBtn" class="button-google">
                    <svg aria-hidden="true" class="google-icon" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z" fill="#FBBC05"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path><path d="M1 1h22v22H1z" fill="none"></path></svg>
                    <span data-i18n="googleLogin">Google 로그인</span>
                </button>
                <div id="authStatus" class="status-box hidden"></div>
            </footer>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div id="chatContainer" class="chat-container">
                <div class="chat-message ai">
                    <div class="chat-bubble">
                        <p data-i18n="welcomeMessage">안녕하세요! AI 자동 블로깅 스튜디오입니다.</p>
                        <p data-i18n="instructionMessage"><strong>아래 입력창에 포스팅할 주제, YouTube URL을 입력하거나, 오른쪽 '콘텐츠 소스'에서 동영상 파일을 선택한 후 전송 버튼(➤)을 누르세요.</strong></p>
                        <p data-i18n="topicDiscoveryMessage">아이디어가 필요하시면 '주제 탐색' 모드를 켜고 대화를 시작할 수 있습니다.</p>
                    </div>
                </div>
            </div>
        
            <div class="chat-input-area">
                <div class="chat-mode-toggle">
                    <button id="topicDiscoveryBtn" data-i18n="topicDiscovery" title="주제 탐색 모드 켜기/끄기">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg>
                        <span data-i18n="topicDiscoveryMode">주제 탐색</span>
                    </button>
                </div>
                <form id="chatForm" class="chat-form">
                    <textarea id="chatInput" class="chat-input" data-i18n-placeholder="chatInputPlaceholder" placeholder="주제, YouTube URL, 또는 질문을 입력하세요..." rows="3"></textarea>
                    <div class="form-actions">
                        <button type="submit" class="send-btn" data-i18n="send">
                            ➤
                        </button>
                    </div>
                </form>
            </div>
        </main>

        <!-- Right Sidebar -->
        <aside class="sidebar-right">
            <div class="sidebar-header">
                <h2 data-i18n="runSettings">실행 설정</h2>
                <button id="themeToggle" class="theme-toggle" title="다크/라이트 모드 전환">
                    <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><path d="M12 1v2"></path><path d="M12 21v2"></path><path d="M4.22 4.22l1.42 1.42"></path><path d="M18.36 18.36l1.42 1.42"></path><path d="M1 12h2"></path><path d="M21 12h2"></path><path d="M4.22 19.78l1.42-1.42"></path><path d="M18.36 5.64l1.42-1.42"></path></svg>
                    <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                </button>
            </div>

            <div class="sidebar-section">
                <details class="collapsible-section" open>
                    <summary class="sidebar-section-header">
                        <h3 class="sidebar-section-title" data-i18n="apiSettings">API 설정</h3>
                        <span class="collapse-icon"></span>
                    </summary>
                    <div class="collapsible-content-wrapper">
                        <div class="settings-group">
                            <h4 data-i18n="requiredSettings">필수 설정</h4>
                            <p class="form-group-description" data-i18n="apiKeyNote">자동 블로그 포스팅을 위해 아래 API 키들을 입력해주세요.</p>
                            <div class="form-group">
                                <label for="geminiApiKey" data-i18n="geminiApiKey">Gemini API Key</label>
                                <input type="password" id="geminiApiKey" data-i18n-placeholder="geminiApiKeyPlaceholder" placeholder="AI 콘텐츠 생성을 위한 Gemini API 키">
                                <a href="https://aistudio.google.com/app/apikey" target="_blank" class="api-link" data-i18n="getGeminiKey">➤ Gemini API Key 받기</a>
                            </div>
                            <div class="form-group">
                                <label for="googleClientId" data-i18n="googleClientId">Google Client ID</label>
                                <input type="text" id="googleClientId" data-i18n-placeholder="googleClientIdPlaceholder" placeholder="Blogger 로그인을 위한 Google OAuth ID">
                                <p class="api-link" data-i18n="checkBlogManagement">★ Blog Management에서 확인 가능</p>
                            </div>
                            <div class="form-group">
                                <label for="blogId" data-i18n="blogId">Blog ID</label>
                                <input type="text" id="blogId" data-i18n-placeholder="blogIdPlaceholder" placeholder="Blogger 블로그 ID (숫자)">
                                <p class="api-link" data-i18n="checkBlogAddress">★ Blog Management → Settings → Basic에서 확인 가능</p>
                            </div>
                            <div class="form-group">
                                <label for="blogAddress" data-i18n="blogAddress">Blog Address</label>
                                <input type="url" id="blogAddress" data-i18n-placeholder="blogAddressPlaceholder" placeholder="https://yourblog.blogspot.com">
                                <p class="info-text" data-i18n="blogAddressNote">블로그 주소를 정확히 입력하세요 (https:// 포함)</p>
                            </div>
                        </div>
                    </div>
                </details>

                <details class="collapsible-section" open>
                    <summary class="sidebar-section-header">
                        <h3 class="sidebar-section-title" data-i18n="imageSource">이미지 소스</h3>
                        <span class="collapse-icon"></span>
                    </summary>
                    <div class="collapsible-content-wrapper">
                        <div class="form-group">
                            <label for="imageSource" data-i18n="selectImageSource">이미지 소스 선택</label>
                            <select id="imageSource">
                                <option value="ai" data-i18n="aiGenerated">AI 생성 이미지</option>
                                <option value="pexels" data-i18n="pexelsStock">Pexels 무료 스톡</option>
                                <option value="none" data-i18n="noImage">이미지 없음</option>
                            </select>
                        </div>
                        <div id="pexelsApiKeyGroup" class="form-group hidden">
                            <label for="pexelsApiKey" data-i18n="pexelsApiKey">Pexels API Key</label>
                            <input type="password" id="pexelsApiKey" data-i18n-placeholder="pexelsApiKeyPlaceholder" placeholder="Pexels 무료 이미지를 위한 API 키">
                            <a href="https://www.pexels.com/api/" target="_blank" class="api-link" data-i18n="getPexelsKey">➤ Pexels API Key 받기</a>
                        </div>
                    </div>
                </details>

                <details class="collapsible-section" open>
                    <summary class="sidebar-section-header">
                        <h3 class="sidebar-section-title" data-i18n="contentSource">콘텐츠 소스</h3>
                        <span class="collapse-icon"></span>
                    </summary>
                    <div class="collapsible-content-wrapper">
                        <div class="form-group">
                            <label for="fileInput" data-i18n="uploadFile">파일 업로드</label>
                            <input type="file" id="fileInput" accept=".txt,.md,.pdf,.docx,.mp4,.mov,.avi,.mkv,.mp3,.wav,.m4a" multiple>
                            <p class="info-text" data-i18n="supportedFormats">지원 형식: 텍스트, 문서, 동영상, 오디오</p>
                        </div>
                        <div class="form-group">
                            <label for="sourceLanguage" data-i18n="sourceLanguage">소스 언어</label>
                            <select id="sourceLanguage">
                                <option value="auto" data-i18n="autoDetect">자동 감지</option>
                                <option value="ko" data-i18n="korean">한국어</option>
                                <option value="en" data-i18n="english">영어</option>
                                <option value="ja" data-i18n="japanese">일본어</option>
                                <option value="zh" data-i18n="chinese">중국어</option>
                                <option value="vi" data-i18n="vietnamese">베트남어</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="outputLanguage" data-i18n="outputLanguage">출력 언어</label>
                            <select id="outputLanguage">
                                <option value="ko" data-i18n="korean">한국어</option>
                                <option value="en" data-i18n="english">영어</option>
                                <option value="vi" data-i18n="vietnamese">베트남어</option>
                                <option value="ja" data-i18n="japanese">일본어</option>
                                <option value="zh" data-i18n="chinese">중국어</option>
                            </select>
                        </div>
                    </div>
                </details>
            </div>
        </aside>
    </div>

    <!-- Scripts -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>