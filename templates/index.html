<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI Auto-Blogging Studio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='languages.js') }}"></script>
</head>
<body>
    <div class="app-container">
        <!-- Left Sidebar -->
        <aside class="sidebar-left">
            <div class="sidebar-header">
                <h1>AI Blogging Studio</h1>
                <div class="language-selector">
                    <select id="languageSelect" class="language-select">
                        <option value="ko">한국어</option>
                        <option value="vi">Tiếng Việt</option>
                        <option value="en">English</option>
                    </select>
                </div>
            </div>
            <div class="sidebar-section">
                <details id="historySection" class="collapsible-section" open>
                    <summary class="sidebar-section-header">
                        <h2 class="sidebar-section-title" data-i18n="postingHistory">포스팅 기록</h2>
                        <div class="header-actions">
                            <button id="clearHistoryBtn" class="button-icon" data-i18n="clearAllHistory" title="기록 전체 삭제">🗑️</button>
                            <span class="collapse-icon"></span>
                        </div>
                    </summary>
                    <div class="collapsible-content-wrapper">
                        <ul id="historyList" class="history-list">
                            <li class="history-placeholder" data-i18n="noRecords">기록이 없습니다.</li>
                        </ul>
                    </div>
                </details>

                <div class="settings-group">
                    <h3 data-i18n="contentGeneration">콘텐츠 생성 (Gemini)</h3>
                    <div class="form-group">
                        <label for="geminiModel" data-i18n="geminiModel">Gemini 모델</label>
                        <select id="geminiModel">
                            <optgroup data-i18n="geminiSeries25" label="Gemini 2.5 Series (멀티모달 텍스트 출력)">
                                <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
                                <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
                                <option value="gemini-2.5-flash-lite">Gemini 2.5 Flash-Lite</option>
                            </optgroup>
                            <optgroup data-i18n="geminiSeries20" label="Gemini 2.0 Series (멀티모달 텍스트 출력)">
                                <option value="gemini-2.0-flash">Gemini 2.0 Flash</option>
                                <option value="gemini-2.0-flash-lite">Gemini 2.0 Flash-Lite</option>
                            </optgroup>
                            <optgroup data-i18n="geminiSeries15" label="Gemini 1.5 Series (안정 버전)">
                                <option value="gemini-1.5-pro-latest" selected>Gemini 1.5 Pro (기본값)</option>
                                <option value="gemini-1.5-flash-latest">Gemini 1.5 Flash</option>
                            </optgroup>
                            <optgroup data-i18n="geminiSeries10" label="Gemini 1.0 Series">
                                <option value="gemini-pro">Gemini 1.0 Pro</option>
                            </optgroup>
                            <optgroup data-i18n="geminiSpecialPurpose" label="특수 목적 모델 (블로그 생성 불가)">
                                <option value="gemini-live-2.5-flash-preview">Live: 2.5 Flash (실시간 음성/영상)</option>
                                <option value="gemini-2.5-flash-preview-native-audio-dialog">Audio: 2.5 Flash Native (대화)</option>
                                <option value="gemini-2.5-flash-exp-native-audio-thinking-dialog">Audio: 2.5 Flash Native+Thinking (대화)</option>
                                <option value="gemini-2.5-flash-preview-tts">TTS: 2.5 Flash (텍스트→음성)</option>
                                <option value="gemini-2.5-pro-preview-tts">TTS: 2.5 Pro (텍스트→음성)</option>
                                <option value="gemini-2.0-flash-preview-image-generation">Image Gen: 2.0 Flash (이미지 생성)</option>
                                <option value="gemini-2.0-flash-live-001">Live: 2.0 Flash (실시간 음성/영상)</option>
                            </optgroup>
                            <optgroup data-i18n="geminiDeprecated" label="지원 중단된 모델">
                                <option value="gemini-1.5-pro-002">Gemini 1.5 Pro-002 (지원 중단됨)</option>
                                <option value="gemini-1.5-flash-002">Gemini 1.5 Flash-002 (지원 중단됨)</option>
                                <option value="gemini-1.5-pro-001">Gemini 1.5 Pro-001 (지원 중단됨)</option>
                                <option value="gemini-1.5-flash-001">Gemini 1.5 Flash-001 (지원 중단됨)</option>
                                <option value="gemini-1.0-pro-002">Gemini 1.0 Pro-002 (지원 중단됨)</option>
                            </optgroup>
                        </select>
                        <div id="modelCompatibilityWarning" class="compatibility-warning" style="display: none;">
                            ⚠️ <span data-i18n="specialPurposeModelWarning">이 모델은 특수 목적용으로 블로그 생성에 적합하지 않을 수 있습니다.</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="writingTone" data-i18n="writingTone">글쓰기 톤 & 스타일</label>
                        <select id="writingTone">
                            <option value="friendly" data-i18n-option="friendly">친근한</option>
                            <option value="professional" data-i18n-option="professional">전문적인</option>
                            <option value="casual" data-i18n-option="casual">캐주얼한</option>
                            <option value="formal" data-i18n-option="formal">격식있는</option>
                            <option value="humorous" data-i18n-option="humorous">유머러스한</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="targetAudience" data-i18n="targetAudience">타겟 독자</label>
                        <input type="text" id="targetAudience" data-i18n-placeholder="itBeginners" placeholder="예: IT 초보자">
                    </div>
                </div>

                <div class="responsible-usage-guide">
                    <h4 data-i18n="responsibleUsage">🛡️ 책임감 있는 사용 가이드</h4>
                    <p class="form-group-description">
                        <span data-i18n="responsibilityText1">이 프로그램은 블로그 콘텐츠 생성을 돕는 '도구'입니다. 저작권과 고유성에 대한 최종 책임은 사용자에게 있으며, 생성된 콘텐츠가 Google 검색 스팸 정책, AdSense 정책, 저작권법 등을 위반할 가능성이 있습니다.</span>
                    </p>
                    <p class="form-group-description">
                        <span data-i18n="responsibilityText2">사용된 AI 생성 및 YouTube 변환 콘텐츠는 Google 검색 스팸 정책을 위반할 수 있으며, AdSense 정책, 저작권법 등을 위반할 가능성이 있어 제재를 받을 수 있습니다.</span>
                    </p>
                    <p class="form-group-description">
                        <strong data-i18n="responsibilityRecommended">권장 사용법:</strong> <span data-i18n="responsibilityText4">생성된 콘텐츠는</span> <strong data-i18n="responsibilityDraft">'초안'</strong><span data-i18n="responsibilityText5">으로만 활용하세요. 자신의 지식, 경험, 의견을 충분히 추가하여 독창적인 게시물로 재창조하는 것이 중요합니다.</span>
                    </p>
                </div>
            </div>
            <footer class="sidebar-footer">
                <button id="loginBtn" class="button-google">
                    <svg aria-hidden="true" class="google-icon" viewBox="0 0 24 24">
                        <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"></path>
                        <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path>
                        <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.5 1 10.22 1 12s.43 3.5 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"></path>
                        <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path>
                    </svg>
                    <span data-i18n="googleLogin">Google 로그인</span>
                </button>
                <div id="authStatus" class="status-box hidden"></div>
            </footer>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="chat-container">
                <div class="chat-message ai">
                    <div class="chat-bubble">
                        <p data-i18n="chatWelcome1">안녕하세요! AI 자동 블로깅 스튜디오입니다.</p>
                        <p><strong data-i18n="chatWelcome2">아래 입력창에 포스팅할 주제, YouTube URL을 입력하거나, 오른쪽 '콘텐츠 소스'에서 동영상 파일을 선택한 후 전송 버튼(➤)을 누르세요.</strong></p>
                        <p data-i18n="chatWelcome3">아이디어가 필요하시면 '주제 탐색' 모드를 켜고 대화를 시작할 수 있습니다.</p>
                    </div>
                </div>
            </div>
        
            <div class="chat-input-area">
                <div class="chat-mode-toggle">
                    <button id="topicDiscoveryBtn" title="주제 탐색 모드 켜기/끄기">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path>
                            <path d="M12 9v4"></path>
                            <path d="M12 17h.01"></path>
                        </svg>
                        <span data-i18n="topicDiscovery">주제 탐색</span>
                    </button>
                </div>
                <form id="chatForm" class="chat-form">
                    <input type="text" id="chatInput" data-i18n-placeholder="chatInputPlaceholder" placeholder="여기에 포스팅 주제 또는 YouTube URL을 입력하세요..." autocomplete="off" disabled>
                    <button type="button" id="addToQueueFromChatBtn" title="큐에 추가" disabled>+</button>
                    <button type="submit" id="sendBtn" title="전송" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="22" y1="2" x2="11" y2="13"></line>
                            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                        </svg>
                    </button>
                </form>
            </div>
        </main>

        <!-- Right Sidebar -->
        <aside class="sidebar-right">
            <div class="sidebar-header">
                <h2 data-i18n="runSettings">Run Settings</h2>
                <button id="themeToggleBtn" class="button-icon" title="테마 전환">☀️</button>
            </div>
            <div class="settings-panel">
                <details id="apiSettingsSection" class="collapsible-section" open>
                    <summary class="sidebar-section-header">
                        <h3 class="sidebar-section-title" data-i18n="apiSettings">API 설정</h3>
                        <span class="collapse-icon"></span>
                    </summary>
                    <div class="collapsible-content-wrapper">
                        <div class="form-group-description">
                            💡 <strong data-i18n="requiredSettings">필수 설정:</strong> <span data-i18n="blogAutoGeneration">블로그 자동 생성을 위해 필요한 API 키들을 입력하세요.</span><br>
                            • <a href="https://aistudio.google.com/app/apikey" target="_blank" data-i18n="geminiApiKeyLink">Gemini API 키 발급받기</a><br>
                            • <a href="https://console.cloud.google.com/apis/credentials" target="_blank" data-i18n="googleClientIdLink">Google Client ID 발급받기</a><br>
                            • <span data-i18n="bloggerIdDescription">Blogger 블로그 ID는 블로그 설정에서 확인 가능합니다.</span>
                        </div>
                        <div class="form-group">
                            <label for="apiKey" data-i18n="geminiApiKey">Gemini API 키</label>
                            <input type="password" id="apiKey" data-i18n-placeholder="geminiApiKeyPlaceholder" placeholder="Gemini API 키 (AI 콘텐츠 생성용)">
                        </div>
                        <div class="form-group">
                            <label for="clientId" data-i18n="googleClientId">Google Client ID</label>
                            <input type="text" id="clientId" data-i18n-placeholder="googleOauthPlaceholder" placeholder="Google OAuth Client ID (Blogger 접근용)">
                        </div>
                        <div class="form-group">
                            <label for="blogId" data-i18n="blogId">블로그 ID</label>
                            <input type="text" id="blogId" data-i18n-placeholder="bloggerIdPlaceholder" placeholder="Blogger 블로그 ID (숫자)">
                            <small class="help-text" data-i18n="bloggerIdHelp">블로그 관리 → 설정 → 기본 → 블로그 ID에서 확인 가능</small>
                        </div>
                        <div class="form-group">
                            <label for="blogAddress" data-i18n="blogAddress">블로그 주소</label>
                            <input type="text" id="blogAddress" data-i18n-placeholder="blogAddressPlaceholder" placeholder="https://yourblog.blogspot.com">
                            <small class="help-text" data-i18n="blogAddressHelp">본인의 Blogger 블로그 주소를 입력하세요</small>
                        </div>
                    </div>
                </details>

                <details id="imageSettingsSection" class="collapsible-section" open>
                    <summary class="sidebar-section-header">
                        <h3 class="sidebar-section-title" data-i18n="imageSource">이미지 소스</h3>
                        <span class="collapse-icon"></span>
                    </summary>
                    <div class="collapsible-content-wrapper">
                        <div class="form-group">
                            <div class="radio-group">
                                <label class="radio-item">
                                    <input type="radio" name="imageSource" value="none" checked>
                                    <span class="radio-label" data-i18n="noImage">이미지 없음</span>
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="imageSource" value="pexels">
                                    <span class="radio-label" data-i18n="pexelsSearch">Pexels 검색</span>
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="imageSource" value="ai">
                                    <span class="radio-label" data-i18n="aiGenerated">AI 생성</span>
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="imageSource" value="upload">
                                    <span class="radio-label" data-i18n="uploadImage">이미지 업로드</span>
                                </label>
                            </div>
                        </div>

                        <div id="pexelsConfig" class="config-section" style="display: none;">
                            <div class="form-group">
                                <label for="pexelsApiKey" data-i18n="pexelsApiKey">Pexels API 키</label>
                                <input type="password" id="pexelsApiKey" data-i18n-placeholder="pexelsApiKeyPlaceholder" placeholder="Pexels API 키">
                                <small class="help-text"><a href="https://www.pexels.com/api/" target="_blank" data-i18n="getPexelsApiKey">Pexels API 키 발급받기</a></small>
                            </div>
                        </div>

                        <div id="aiImageConfig" class="config-section" style="display: none;">
                            <div class="form-group">
                                <label for="aiImageModel" data-i18n="aiImageModel">AI 이미지 모델</label>
                                <select id="aiImageModel">
                                    <option value="imagen-3.0-generate-001" data-i18n-option="imagen3Generate">Imagen 3.0 Generate</option>
                                    <option value="imagen-3.0-fast-generate-001" data-i18n-option="imagen3FastGenerate">Imagen 3.0 Fast Generate</option>
                                </select>
                            </div>
                            <div id="gcpProjectGroup" class="form-group">
                                <label for="gcpProjectId" data-i18n="gcpProjectId">GCP 프로젝트 ID</label>
                                <input type="text" id="gcpProjectId" data-i18n-placeholder="gcpProjectIdPlaceholder" placeholder="your-gcp-project-id">
                                <small class="help-text" data-i18n="gcpProjectIdHelp">Google Cloud Console에서 확인 가능</small>
                            </div>
                        </div>

                        <div id="uploadConfig" class="config-section" style="display: none;">
                            <div class="form-group">
                                <label for="userImageUpload" data-i18n="selectImage">이미지 선택</label>
                                <input type="file" id="userImageUpload" accept="image/*">
                                <div id="imagePreviewContainer" class="image-preview-container" style="display: none;">
                                    <img id="imagePreview" class="image-preview">
                                    <button type="button" id="removeImageBtn" class="remove-image-btn">×</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </details>

                <details id="contentSourceSection" class="collapsible-section" open>
                    <summary class="sidebar-section-header">
                        <h3 class="sidebar-section-title" data-i18n="contentSource">콘텐츠 소스</h3>
                        <span class="collapse-icon"></span>
                    </summary>
                    <div class="collapsible-content-wrapper">
                        <div class="form-group">
                            <label for="youtubeUrl" data-i18n="youtubeUrl">YouTube URL</label>
                            <input type="text" id="youtubeUrl" data-i18n-placeholder="youtubeUrlPlaceholder" placeholder="https://www.youtube.com/watch?v=...">
                        </div>
                        <div class="form-group">
                            <label for="topicInput" data-i18n="topicInput">주제 입력</label>
                            <textarea id="topicInput" data-i18n-placeholder="enterYourBlogTopic" placeholder="블로그 주제를 입력하세요..." rows="4"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="fileUpload" data-i18n="fileUpload">파일 업로드</label>
                            <input type="file" id="fileUpload" accept=".txt,.pdf,.docx,.mp4,.avi,.mov,.mkv,.webm">
                            <small class="help-text" data-i18n="fileUploadHelp">텍스트, PDF, 워드 문서, 동영상 파일 지원</small>
                        </div>
                        <div class="form-group">
                            <label for="promptInput" data-i18n="promptInput">추가 프롬프트</label>
                            <textarea id="promptInput" data-i18n-placeholder="aiDetailedInstructions" placeholder="AI에게 전달할 상세한 지시사항을 입력하세요..." rows="3"></textarea>
                        </div>
                    </div>
                </details>

                <details id="postingQueueSection" class="collapsible-section">
                    <summary class="sidebar-section-header">
                        <h3 class="sidebar-section-title" data-i18n="postingQueue">포스팅 큐</h3>
                        <div class="header-actions">
                            <button id="clearQueueBtn" class="button-icon" data-i18n="clearQueue" title="큐 전체 삭제">🗑️</button>
                            <span class="collapse-icon"></span>
                        </div>
                    </summary>
                    <div class="collapsible-content-wrapper">
                        <div class="queue-controls">
                            <button id="addToQueueBtn" class="button-secondary" data-i18n="addToQueue">큐에 추가</button>
                            <button id="startQueueBtn" class="button-primary" data-i18n="startQueue">큐 시작</button>
                            <button id="stopQueueBtn" class="button-secondary" data-i18n="stopQueue" style="display: none;">큐 중지</button>
                        </div>
                        <ul id="queueList" class="queue-list">
                            <li class="queue-placeholder" data-i18n="noQueueItems">큐가 비어있습니다.</li>
                        </ul>
                    </div>
                </details>

                <details id="advancedSettingsSection" class="collapsible-section">
                    <summary class="sidebar-section-header">
                        <h3 class="sidebar-section-title" data-i18n="advancedSettings">고급 설정</h3>
                        <span class="collapse-icon"></span>
                    </summary>
                    <div class="collapsible-content-wrapper">
                        <div class="form-group">
                            <label class="checkbox-item">
                                <input type="checkbox" id="isDraft">
                                <span class="checkbox-label" data-i18n="saveDraft">초안으로 저장</span>
                                <small class="help-text" data-i18n="draftHelp">체크하면 블로그에 바로 게시되지 않고 초안으로 저장됩니다</small>
                            </label>
                        </div>
                        <div class="form-group">
                            <label for="postingDelay" data-i18n="postingDelay">포스팅 간격 (초)</label>
                            <input type="number" id="postingDelay" value="30" min="10" max="3600">
                            <small class="help-text" data-i18n="delayHelp">큐 모드에서 포스트 간 대기 시간</small>
                        </div>
                    </div>
                </details>
            </div>
        </aside>
    </div>

    <!-- Google Identity Services -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>