<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI Auto-Blogging Studio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='languages.js') }}"></script>
</head>
<body>
    <div class="app-container">
        <!-- Headers removed - all controls moved to left navigation -->
        
        <!-- Left Sidebar -->
        <aside class="sidebar-left">
            <div class="sidebar-header">
                <h1>AI Blogging Studio</h1>
                <div class="language-selector">
                    <select id="languageSelect" class="language-select">
                        <option value="ko">한국어</option>
                        <option value="vi">Tiếng Việt</option>
                        <option value="en">English</option>
                    </select>
                </div>
            </div>
            <div class="sidebar-section">
                <details id="historySection" class="collapsible-section" open>
                    <summary class="sidebar-section-header">
                        <h2 class="sidebar-section-title" data-i18n="postingHistory">포스팅 기록</h2>
                        <div class="header-actions">
                            <button id="clearHistoryBtn" class="button-icon" title="기록 전체 삭제">🗑️</button>
                            <span class="collapse-icon"></span>
                        </div>
                    </summary>
                    <div class="collapsible-content-wrapper">
                        <ul id="historyList" class="history-list">
                            <li class="history-placeholder" data-i18n="noHistoryRecords">기록이 없습니다.</li>
                        </ul>
                    </div>
                </details>

                <div class="settings-group">
                    <h3 data-i18n="contentGeneration">콘텐츠 생성 (Gemini)</h3>
                    <div class="form-group">
                        <label for="geminiModel" data-i18n="geminiModel">Gemini 모델</label>
                        <select id="geminiModel">
                            <optgroup label="Gemini 2.5 Series (멀티모달 텍스트 출력)">
                                <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
                                <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
                                <option value="gemini-2.5-flash-lite">Gemini 2.5 Flash-Lite</option>
                            </optgroup>
                            <optgroup label="Gemini 2.0 Series (멀티모달 텍스트 출력)">
                                <option value="gemini-2.0-flash">Gemini 2.0 Flash</option>
                                <option value="gemini-2.0-flash-lite">Gemini 2.0 Flash-Lite</option>
                            </optgroup>
                            <optgroup label="Gemini 1.5 Series (안정 버전)">
                                <option value="gemini-1.5-pro-latest" selected>Gemini 1.5 Pro (기본값)</option>
                                <option value="gemini-1.5-flash-latest">Gemini 1.5 Flash</option>
                            </optgroup>
                            <optgroup label="Gemini 1.0 Series">
                                <option value="gemini-pro">Gemini 1.0 Pro</option>
                            </optgroup>
                            <optgroup label="특수 목적 모델 (블로그 생성 불가)">
                                <option value="gemini-live-2.5-flash-preview">Live: 2.5 Flash (실시간 음성/영상)</option>
                                <option value="gemini-2.5-flash-preview-native-audio-dialog">Audio: 2.5 Flash Native (대화)</option>
                                <option value="gemini-2.5-flash-exp-native-audio-thinking-dialog">Audio: 2.5 Flash Native+Thinking (대화)</option>
                                <option value="gemini-2.5-flash-preview-tts">TTS: 2.5 Flash (텍스트→음성)</option>
                                <option value="gemini-2.5-pro-preview-tts">TTS: 2.5 Pro (텍스트→음성)</option>
                                <option value="gemini-2.0-flash-preview-image-generation">Image Gen: 2.0 Flash (이미지 생성)</option>
                                <option value="gemini-2.0-flash-live-001">Live: 2.0 Flash (실시간 음성/영상)</option>
                            </optgroup>
                            <optgroup label="지원 중단된 모델">
                                <option value="gemini-1.5-flash">Gemini 1.5 Flash (구)</option>
                                <option value="gemini-1.5-flash-8b">Gemini 1.5 Flash-8B</option>
                                <option value="gemini-1.5-pro">Gemini 1.5 Pro (구)</option>
                            </optgroup>
                        </select>
                        <p id="modelCompatibilityWarning" class="info-text hidden" style="color: var(--warning-color); margin-top: 8px;"></p>
                    </div>
                    <div class="form-group">
                        <label for="writingTone" data-i18n="writingTone">글쓰기 톤 & 스타일</label>
                        <select id="writingTone">
                            <option value="전문적인 (Professional)" data-i18n-option="professional">전문적인</option>
                            <option value="친근한 (Friendly)" data-i18n-option="friendly" selected>친근한</option>
                            <option value="유머러스한 (Humorous)" data-i18n-option="humorous">유머러스한</option>
                            <option value="격식있는 (Formal)" data-i18n-option="formal">격식있는</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="targetAudience" data-i18n="targetAudience">타겟 독자</label>
                        <input type="text" id="targetAudience" data-i18n="targetAudience" placeholder="예: IT 비전공자">
                    </div>
                </div>

                <div class="settings-group policy-warning-group">
                    <h3>⚠️ 책임감 있는 사용 가이드</h3>
                    <p class="form-group-description">
                        본 프로그램은 콘텐츠 제작을 돕는 <strong>'도구'</strong>이며, 생성된 콘텐츠의 저작권 및 각종 정책 준수에 대한 <strong>최종 책임은 사용자에게 있습니다.</strong>
                    </p>
                    <p class="form-group-description">
                        AI 생성 및 YouTube 변환 콘텐츠를 그대로 사용할 경우, Google 검색 스팸 정책, 애드센스 정책, 저작권법 등에 위배되어 불이익을 받을 수 있습니다.
                    </p>
                    <p class="form-group-description">
                        <strong>권장 사용법:</strong> 생성된 콘텐츠는 <strong>'초안'</strong>으로만 활용하세요. 자신의 지식, 경험, 의견을 충분히 추가하여 독창적인 게시물로 재창조하는 것이 중요합니다.
                    </p>
                </div>
            </div>
            <footer class="sidebar-footer">
                <button id="loginBtn" class="button-google">
                    <svg aria-hidden="true" class="google-icon" viewBox="0 0 24 24">
                        <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"></path>
                        <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path>
                        <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.5 1 10.22 1 12s.43 3.5 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"></path>
                        <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path>
                    </svg>
                    <span>Google 로그인</span>
                </button>
                <div id="authStatus" class="status-box hidden"></div>
            </footer>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- 모바일 멀티 스크린 인터페이스 - 스마트 홈 스타일 -->
            <div class="mobile-screens" style="display: none;">
                <!-- 왼쪽 네비게이션 바 -->
                <div class="mobile-nav-sidebar">
                    <!-- 언어 선택 -->
                    <div class="mobile-language-selector">
                        <select id="mobileLangSelect" class="mobile-lang-select">
                            <option value="ko">한국어</option>
                            <option value="en">English</option>
                            <option value="vi">Tiếng Việt</option>
                        </select>
                    </div>
                    
                    <button class="mobile-nav-item active" onclick="showMobileScreen('api-settings')" title="API 설정">
                        🔑
                    </button>
                    <button class="mobile-nav-item" onclick="showMobileScreen('login')" title="로그인">
                        👤
                    </button>
                    <button class="mobile-nav-item" onclick="showMobileScreen('content-source')" title="콘텐츠 소스">
                        📝
                    </button>
                    <button class="mobile-nav-item" onclick="showMobileScreen('writing-settings')" title="글쓰기 설정">
                        ⚙️
                    </button>
                    <button class="mobile-nav-item" onclick="showMobileScreen('generate')" title="생성하기">
                        ✨
                    </button>
                </div>
                
                <!-- 메인 콘텐츠 영역 -->
                <div class="mobile-content-area">
                    <!-- 스크린 1: API 설정 -->
                    <div id="screen-api-settings" class="mobile-screen active">
                        <div class="screen-header">
                            <h2 class="screen-title" data-i18n="apiKey">Khóa API bắt buộc</h2>
                            <p class="screen-subtitle" data-i18n="configureAiConnections">Cấu hình AI và kết nối blog của bạn</p>
                        </div>
                        <div class="screen-content">
                            <div class="form-group">
                                <label data-i18n="geminiApiKey">Khóa API Gemini</label>
                                <input type="password" id="mobileApiKey" data-i18n-placeholder="aiContentGeneration" placeholder="Tạo nội dung AI">
                            </div>
                            
                            <div class="form-group">
                                <label data-i18n="googleClientId">ID Khách hàng Google</label>
                                <input type="text" id="mobileClientId" data-i18n-placeholder="bloggerAccess" placeholder="Truy cập Blogger">
                            </div>
                            
                            <div class="form-group">
                                <label data-i18n="blogId">ID Blog</label>
                                <input type="text" id="mobileBlogId" data-i18n-placeholder="bloggerBlogId" placeholder="ID blog Blogger (số)">
                            </div>
                            
                            <div class="form-group">
                                <label data-i18n="blogAddress">Địa chỉ Blog</label>
                                <input type="text" id="mobileBlogAddress" data-i18n-placeholder="bloggerBlogAddress" placeholder="https://yourblog.blogspot.com">
                            </div>
                        </div>
                    </div>

                    <!-- 스크린 2: Google 로그인 -->
                    <div id="screen-login" class="mobile-screen">
                        <div class="screen-header">
                            <h2 class="screen-title" data-i18n="authentication">Xác thực</h2>
                            <p class="screen-subtitle" data-i18n="connectGoogleAccount">Kết nối tài khoản Google của bạn để xuất bản blog</p>
                        </div>
                        <div class="screen-content">
                            <div class="form-group">
                                <div id="mobileAuthStatus" class="auth-status-mobile" data-i18n="loginRequired">
                                    Yêu cầu đăng nhập
                                </div>
                                
                                <button id="mobileLoginBtn" class="mobile-auth-btn" data-i18n="login">
                                    Đăng nhập
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 스크린 3: 콘텐츠 소스 -->
                    <div id="screen-content-source" class="mobile-screen">
                        <div class="screen-header">
                            <h2 class="screen-title" data-i18n="contentInput">Nguồn nội dung</h2>
                            <p class="screen-subtitle" data-i18n="contentInputSubtitle">Chọn phương pháp tạo nội dung</p>
                        </div>
                        <div class="screen-content">
                            <div class="form-group">
                                <label data-i18n="youtubeUrl">URL YouTube</label>
                                <input type="text" id="mobileYoutubeUrl" placeholder="https://www.youtube.com/watch?v=...">
                            </div>
                            
                            <div class="form-group">
                                <label data-i18n="topicInput">Nhập chủ đề</label>
                                <textarea id="mobileTopicInput" data-i18n-placeholder="enterYourBlogTopic" placeholder="Nhập chủ đề blog của bạn..." rows="4"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label data-i18n="promptInput">Nhập prompt</label>
                                <textarea id="mobilePromptInput" data-i18n-placeholder="aiDetailedInstructions" placeholder="Nhập hướng dẫn chi tiết cho AI..." rows="3"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- 스크린 4: 글쓰기 설정 -->
                    <div id="screen-writing-settings" class="mobile-screen">
                        <div class="screen-header">
                            <h2 class="screen-title" data-i18n="writingTone">Giọng điệu & Phong cách viết</h2>
                            <p class="screen-subtitle" data-i18n="customizeContentStyle">Tùy chỉnh phong cách nội dung và đối tượng của bạn</p>
                        </div>
                        <div class="screen-content">
                            <div class="form-group">
                                <label data-i18n="writingTone">Giọng điệu & Phong cách viết</label>
                                <select id="mobileWritingTone">
                                    <option value="friendly" data-i18n-option="friendly">Thân thiện</option>
                                    <option value="professional" data-i18n-option="professional">Chuyên nghiệp</option>
                                    <option value="casual" data-i18n-option="casual">Thoải mái</option>
                                    <option value="formal" data-i18n-option="formal">Trang trọng</option>
                                    <option value="humorous" data-i18n-option="humorous">Hài hước</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label data-i18n="targetAudience">Đối tượng mục tiêu</label>
                                <input type="text" id="mobileTargetAudience" data-i18n-placeholder="itBeginners" placeholder="ví dụ: Người mới bắt đầu IT">
                            </div>
                        </div>
                    </div>

                    <!-- 스크린 5: 생성하기 -->
                    <div id="screen-generate" class="mobile-screen">
                        <div class="screen-header">
                            <h2 class="screen-title" data-i18n="generatePost">Tạo bài viết</h2>
                            <p class="screen-subtitle" data-i18n="reviewSettingsCreate">Xem lại cài đặt và tạo nội dung blog của bạn</p>
                        </div>
                        <div class="screen-content">
                            <!-- 설정 요약 섹션 -->
                            <div class="generation-summary" style="margin-bottom: 20px; padding: 15px; background: #2a2a2a; border-radius: 10px; border: 1px solid #333;">
                                <h4 style="color: white; margin: 0 0 10px 0; font-size: 0.9rem;" data-i18n="contentSettingsSummary">Tóm tắt cài đặt nội dung</h4>
                                <div id="summaryContent" style="color: #cccccc; font-size: 0.8rem; line-height: 1.4;">
                                    <div><strong data-i18n="contentSource">Nguồn nội dung:</strong> <span id="summarySource">-</span></div>
                                    <div><strong data-i18n="writingTone">Giọng điệu viết:</strong> <span id="summaryTone">-</span></div>
                                    <div><strong data-i18n="targetAudience">Đối tượng mục tiêu:</strong> <span id="summaryAudience">-</span></div>
                                </div>
                            </div>
                            
                            <!-- 프롬프트 최종 확인/수정 -->
                            <div class="form-group">
                                <label data-i18n="finalPrompt">Prompt cuối cùng (tùy chọn chỉnh sửa)</label>
                                <textarea id="finalPromptInput" data-i18n-placeholder="finalAiInstructions" placeholder="Hướng dẫn cuối cùng cho AI..." rows="4" style="font-size: 14px;"></textarea>
                            </div>
                            
                            <!-- 생성 버튼 -->
                            <div class="form-group">
                                <button id="mobileGenerateBtn" class="mobile-auth-btn" data-i18n="generatePost">
                                    🚀 Tạo bài viết
                                </button>
                            </div>
                            
                            <!-- 생성 상태 -->
                            <div id="mobileGenerationStatus" class="auth-status-mobile" style="display: none;" data-i18n="ready">
                                Sẵn sàng
                            </div>
                            
                            <!-- 진행 상황 표시 -->
                            <div id="generationProgress" style="display: none; margin-top: 15px;">
                                <div style="background: #333; border-radius: 10px; overflow: hidden; height: 8px;">
                                    <div id="progressBar" style="background: #6366f1; height: 100%; width: 0%; transition: width 0.3s ease;"></div>
                                </div>
                                <div id="progressText" style="color: #888; font-size: 0.8rem; margin-top: 5px; text-align: center;">Đang khởi tạo...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

                <!-- Cleaned up structure -->
                </div>

                <!-- 스크린 6: 플랫폼 설정 -->
                <div id="screen-platform-settings" class="mobile-screen">
                    <h2 class="screen-title">플랫폼 설정</h2>
                    <div class="screen-content">
                        <h3>발행 플랫폼</h3>
                        <div class="form-group">
                            <label>블로그 플랫폼</label>
                            <select id="mobilePlatform">
                                <option value="blogger">Google Blogger</option>
                                <option value="wordpress">WordPress</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>이미지 소스</label>
                            <select id="mobileImageSource">
                                <option value="none">이미지 없음</option>
                                <option value="ai">AI 생성</option>
                                <option value="pexels">Pexels 검색</option>
                            </select>
                        </div>
                    </div>
                    <div class="mobile-nav-buttons">
                        <button class="mobile-nav-btn" onclick="showScreen('writing-settings')">이전</button>
                        <button class="mobile-nav-btn primary" onclick="showScreen('generate')">다음</button>
                    </div>
                </div>

                <!-- 스크린 7: 생성 -->
                <div id="screen-generate" class="mobile-screen">
                    <h2 class="screen-title">생성하기</h2>
                    <div class="screen-content">
                        <h3>설정 확인</h3>
                        <div id="mobileSettingsSummary" class="form-group">
                            <!-- 설정 요약이 여기 표시됩니다 -->
                        </div>
                    </div>
                    <div class="mobile-nav-buttons">
                        <button class="mobile-nav-btn" onclick="showScreen('platform-settings')">이전</button>
                        <button class="mobile-nav-btn primary" id="mobileGenerateBtn">블로그 포스트 생성</button>
                    </div>
                </div>
            </div>
            <div id="chatContainer" class="chat-container">
                <div class="chat-message ai">
                    <div class="chat-bubble">
                        <p>안녕하세요! AI 자동 블로깅 스튜디오입니다.</p>
                        <p><strong>아래 입력창에 포스팅할 주제, YouTube URL을 입력하거나, 오른쪽 '콘텐츠 소스'에서 동영상 파일을 선택한 후 전송 버튼(➤)을 누르세요.</strong></p>
                        <p>아이디어가 필요하시면 '주제 탐색' 모드를 켜고 대화를 시작할 수 있습니다.</p>
                    </div>
                </div>
            </div>
        
            <div class="chat-input-area">
                <div class="chat-mode-toggle">
                    <button id="topicDiscoveryBtn" title="주제 탐색 모드 켜기/끄기">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path>
                            <path d="M12 9v4"></path>
                            <path d="M12 17h.01"></path>
                        </svg>
                        <span>주제 탐색</span>
                    </button>
                </div>
                <form id="chatForm" class="chat-form">
                    <input type="text" id="chatInput" placeholder="여기에 포스팅 주제 또는 YouTube URL을 입력하세요..." autocomplete="off" disabled>
                    <button type="button" id="addToQueueFromChatBtn" title="큐에 추가" disabled>+</button>
                    <button type="submit" id="sendBtn" title="전송" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="22" y1="2" x2="11" y2="13"></line>
                            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                        </svg>
                    </button>
                </form>
            </div>
        </main>

        <!-- Right Sidebar -->
        <aside class="sidebar-right">
            <div class="sidebar-header">
                <h2>Run Settings</h2>
                <button id="themeToggleBtn" class="button-icon" title="테마 전환">☀️</button>
            </div>
            <div class="settings-panel">
                <details id="apiSettingsSection" class="collapsible-section" open>
                    <summary class="sidebar-section-header">
                        <h3 class="sidebar-section-title">API 설정</h3>
                        <span class="collapse-icon"></span>
                    </summary>
                    <div class="collapsible-content-wrapper">
                        <div class="form-group-description">
                            💡 <strong>필수 설정:</strong> 블로그 자동 생성을 위해 필요한 API 키들을 입력하세요.<br>
                            • <a href="https://aistudio.google.com/app/apikey" target="_blank">Gemini API 키 발급받기</a><br>
                            • <a href="https://console.cloud.google.com/apis/credentials" target="_blank">Google Client ID 발급받기</a><br>
                            • Blogger 블로그 ID는 블로그 설정에서 확인 가능합니다.
                        </div>
                        <div class="form-group">
                            <label for="apiKey">Gemini API 키</label>
                            <input type="password" id="apiKey" placeholder="Gemini API 키 (AI 콘텐츠 생성용)">
                        </div>
                        <div class="form-group">
                            <label for="clientId">Google Client ID</label>
                            <input type="text" id="clientId" placeholder="Google OAuth Client ID (Blogger 접근용)">
                        </div>
                        <div class="form-group">
                            <label for="blogId">블로그 ID</label>
                            <input type="text" id="blogId" placeholder="Blogger 블로그 ID (숫자)">
                            <small class="help-text">블로그 관리 → 설정 → 기본 → 블로그 ID에서 확인 가능</small>
                        </div>
                        <div class="form-group">
                            <label for="blogAddress">블로그 주소</label>
                            <input type="text" id="blogAddress" placeholder="https://yourblog.blogspot.com">
                            <small class="help-text">본인의 Blogger 블로그 주소를 입력하세요</small>
                        </div>
                    </div>
                </details>

                <details id="imageSettingsSection" class="collapsible-section" open>
                    <summary class="sidebar-section-header">
                        <h3 class="sidebar-section-title">이미지 소스</h3>
                        <span class="collapse-icon"></span>
                    </summary>
                    <div class="collapsible-content-wrapper">
                        <div class="form-group-description">
                            🖼️ <strong>이미지 설정:</strong> 블로그 글에 삽입할 이미지 소스를 선택하세요.<br>
                            • <strong>없음:</strong> 이미지 없이 텍스트만 생성<br>
                            • <strong>Pexels:</strong> 무료 스톡 이미지 자동 검색 (<a href="https://www.pexels.com/api/" target="_blank">API 키 필요</a>)<br>
                            • <strong>AI 생성:</strong> 주제에 맞는 이미지를 AI로 생성<br>
                            • <strong>업로드:</strong> 직접 이미지 파일 업로드
                        </div>
                    <div class="form-group image-source-selector">
                        <input type="radio" name="imageSource" value="none" id="imageNone" checked>
                        <label for="imageNone">없음</label>
                        <input type="radio" name="imageSource" value="pexels" id="imagePexels">
                        <label for="imagePexels">Pexels</label>
                        <input type="radio" name="imageSource" value="ai" id="imageAi">
                        <label for="imageAi">AI 생성</label>
                        <input type="radio" name="imageSource" value="upload" id="imageUpload">
                        <label for="imageUpload">업로드</label>
                    </div>
                    <div id="pexelsConfig" class="form-group hidden">
                        <label for="pexelsApiKey">Pexels API 키</label>
                        <input type="password" id="pexelsApiKey" placeholder="Pexels API 키 (무료)">
                        <small class="help-text">무료 계정으로 월 200회 이미지 검색 가능</small>
                    </div>
                    <div id="aiImageConfig" class="form-group hidden">
                        <div class="form-group">
                            <label for="aiImageModel">AI 이미지 모델</label>
                            <select id="aiImageModel">
                                <option value="imagen-2" selected>Google Imagen 2</option>
                            </select>
                        </div>
                        <div id="gcpProjectGroup" class="form-group">
                            <label for="gcpProjectId">GCP Project ID</label>
                            <input type="text" id="gcpProjectId" placeholder="Google Cloud 프로젝트 ID">
                            <small class="help-text">Google Cloud Console에서 프로젝트 생성 후 ID 입력</small>
                        </div>
                    </div>
                    <div id="uploadConfig" class="form-group hidden">
                        <label for="userImageUpload">이미지 파일</label>
                        <input type="file" id="userImageUpload" accept="image/jpeg, image/png, image/webp" class="file-input">
                        <div id="imagePreviewContainer" class="image-preview-container hidden">
                            <img id="imagePreview" src="#" alt="Preview">
                            <button id="removeImageBtn" type="button">&times;</button>
                        </div>
                    </div>
                    </div>
                </details>
                
                <details id="contentSettingsSection" class="collapsible-section" open>
                    <summary class="sidebar-section-header">
                        <h3 class="sidebar-section-title">콘텐츠 소스</h3>
                        <span class="collapse-icon"></span>
                    </summary>
                    <div class="collapsible-content-wrapper">
                        <div class="form-group-description">
                            🎬 <strong>YouTube 처리 방식:</strong> YouTube 영상을 블로그 글로 변환하는 방법을 선택하세요.<br>
                            • <strong>자막:</strong> YouTube 자막을 추출하여 글 생성 (권장)<br>
                            • <strong>음성:</strong> 영상 음성을 텍스트로 변환 (개발 중)<br>
                            • <strong>동영상 파일:</strong> 직접 업로드한 동영상 파일 처리
                        </div>
                    <div class="form-group image-source-selector">
                        <input type="radio" name="youtubeSourceType" value="transcript" id="youtubeTranscript" checked>
                        <label for="youtubeTranscript">자막 (URL)</label>
                        <input type="radio" name="youtubeSourceType" value="audio" id="youtubeAudio">
                        <label for="youtubeAudio">음성 (URL)</label>
                        <input type="radio" name="youtubeSourceType" value="videoFile" id="youtubeFile">
                        <label for="youtubeFile">동영상 파일</label>
                    </div>
                    <div id="youtubeAudioWarning" class="form-group-description hidden">
                        ⚠️ 음성 추출 기능은 개발 중입니다.
                    </div>
                    <div id="videoUploadConfig" class="form-group hidden">
                        <label for="userVideoUpload">동영상 파일</label>
                        <input type="file" id="userVideoUpload" accept="video/*" class="file-input">
                        <div id="videoFileInfo" class="hidden">
                            <p>선택된 파일: <span id="videoFileName"></span></p>
                            <button id="removeVideoBtn" type="button">파일 제거</button>
                        </div>
                    </div>
                    </div>
                </details>

                <details id="postingOptionsSection" class="collapsible-section" open>
                    <summary class="sidebar-section-header">
                        <h3 class="sidebar-section-title">포스팅 옵션</h3>
                        <span class="collapse-icon"></span>
                    </summary>
                    <div class="collapsible-content-wrapper">
                        <div class="form-group-description">
                            🌐 <strong>플랫폼 & 발행 설정:</strong> 블로그 플랫폼과 발행 방식을 설정하세요.<br>
                            • <strong>플랫폼:</strong> Blogger, WordPress, Tistory, Naver 블로그 지원<br>
                            • <strong>미리보기:</strong> 생성된 글을 검토 후 수동으로 발행<br>
                            • <strong>임시 저장:</strong> 블로그에 초안으로만 저장 (즉시 발행 안함)
                        </div>
                    
                    <div class="form-group">
                        <label for="platformSelect">발행 플랫폼</label>
                        <select id="platformSelect">
                            <option value="blogger" selected>Google Blogger</option>
                            <option value="wordpress">WordPress.com</option>
                            <option value="tistory">Tistory</option>
                            <option value="naver">네이버 블로그</option>
                        </select>
                    </div>

                    <!-- Platform-specific configurations -->
                    <div id="bloggerConfig" class="platform-config">
                        <div class="form-group">
                            <label for="bloggerBlogId">Blogger 블로그 ID</label>
                            <input type="text" id="bloggerBlogId" placeholder="숫자로 된 블로그 ID">
                            <small class="help-text">Blogger 관리 → 설정 → 기본에서 확인</small>
                        </div>
                    </div>

                    <div id="wordpressConfig" class="platform-config hidden">
                        <div class="form-group">
                            <label for="wordpressSite">WordPress 사이트</label>
                            <input type="text" id="wordpressSite" placeholder="yoursite.wordpress.com">
                        </div>
                        <div class="form-group">
                            <label for="wordpressToken">WordPress API 토큰</label>
                            <input type="password" id="wordpressToken" placeholder="WordPress.com API 토큰">
                            <small class="help-text"><a href="https://developer.wordpress.com/apps/" target="_blank">WordPress.com에서 토큰 발급</a></small>
                        </div>
                    </div>

                    <div id="tistoryConfig" class="platform-config hidden">
                        <div class="status-box error" style="margin-bottom: 15px;">
                            <strong>⚠️ 중요 공지</strong><br>
                            Tistory는 2021년부터 공식 API를 중단했습니다.<br>
                            자동 발행이 불가능하며, 생성된 콘텐츠를 수동으로 복사하여 포스팅해야 합니다.
                        </div>
                        <div class="form-group">
                            <label for="tistoryBlogName">Tistory 블로그명</label>
                            <input type="text" id="tistoryBlogName" placeholder="yourblog (예: myblog)">
                            <small class="help-text">수동 포스팅을 위한 블로그명만 입력</small>
                        </div>
                    </div>

                    <div id="naverConfig" class="platform-config hidden">
                        <div class="form-group">
                            <label for="naverBlogId">네이버 블로그 ID</label>
                            <input type="text" id="naverBlogId" placeholder="네이버 블로그 ID">
                        </div>
                        <div class="form-group">
                            <label for="naverClientId">네이버 Client ID</label>
                            <input type="text" id="naverClientId" placeholder="네이버 개발자센터 Client ID">
                        </div>
                        <div class="form-group">
                            <label for="naverClientSecret">네이버 Client Secret</label>
                            <input type="password" id="naverClientSecret" placeholder="네이버 개발자센터 Client Secret">
                            <small class="help-text"><a href="https://developers.naver.com/apps/" target="_blank">네이버 개발자센터에서 앱 등록</a></small>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="previewBeforePost">
                            포스팅 전 미리보기
                        </label>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="postAsDraft">
                            임시 저장으로 포스팅
                        </label>
                    </div>
                    </div>
                </details>

                <details id="automationSection" class="collapsible-section">
                    <summary class="sidebar-section-header">
                        <h3 class="sidebar-section-title">자동화 & PC 제어</h3>
                        <span class="collapse-icon"></span>
                    </summary>
                    <div class="collapsible-content-wrapper">
                        <div class="form-group-description">
                            🤖 <strong>고급 기능:</strong> 자동 포스팅 및 시스템 제어 기능입니다.<br>
                            • <strong>자동 포스팅:</strong> 설정한 간격으로 자동으로 글 생성 및 발행<br>
                            • <strong>PC 제어:</strong> 웹 환경에서는 지원되지 않습니다
                        </div>
                    <div class="form-group">
                        <label for="loopInterval">자동 포스팅 간격</label>
                        <select id="loopInterval">
                            <option value="30">30분</option>
                            <option value="60" selected>1시간</option>
                            <option value="120">2시간</option>
                            <option value="180">3시간</option>
                            <option value="360">6시간</option>
                            <option value="720">12시간</option>
                            <option value="1440">24시간</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <button id="startLoopBtn" class="button button-primary">자동 포스팅 시작</button>
                        <button id="stopLoopBtn" class="button button-secondary">자동 포스팅 중지</button>
                    </div>
                    <div class="form-group">
                        <button id="shutdownPcBtn" class="button button-secondary">PC 자동 종료</button>
                        <button id="cancelShutdownBtn" class="button button-secondary">종료 취소</button>
                    </div>
                    </div>
                </details>

                <details id="queueSection" class="collapsible-section">
                    <summary class="sidebar-section-header">
                        <h3 class="sidebar-section-title">포스팅 대기열</h3>
                        <span class="collapse-icon"></span>
                    </summary>
                    <div class="collapsible-content-wrapper">
                        <div class="form-group-description">
                            📋 <strong>대기열 관리:</strong> 여러 주제나 YouTube URL을 대기열에 추가하여 순차적으로 처리할 수 있습니다.<br>
                            • 메인 채팅창에서 "+" 버튼을 눌러 대기열에 추가<br>
                            • 대기 상태, 처리 중, 완료 상태를 실시간으로 확인
                        </div>
                    <div id="postQueueContainer">
                        <p>대기열이 비어있습니다.</p>
                    </div>
                    </div>
                </details>
            </div>
        </aside>
    </div>

    <!-- Preview Modal -->
    <div id="previewModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>포스팅 미리보기</h2>
                <button id="closeModalBtn" class="button-icon">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="previewTitle">제목</label>
                    <input type="text" id="previewTitle" readonly>
                </div>
                <div class="form-group">
                    <label for="previewBody">내용</label>
                    <textarea id="previewBody" readonly></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelPostBtn" class="button button-secondary">취소</button>
                <button id="approvePostBtn" class="button button-primary">포스팅 승인</button>
            </div>
        </div>
    </div>

    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
